1:"$Sreact.fragment"
2:I[2971,["/_next/static/chunks/94ba2cde1157bdf7.js","/_next/static/chunks/cb5adbf303334e0f.js"],"Header"]
3:I[51608,["/_next/static/chunks/7c4f85df3640cb60.js","/_next/static/chunks/67b669c080ef588c.js"],"default"]
4:I[21110,["/_next/static/chunks/7c4f85df3640cb60.js","/_next/static/chunks/67b669c080ef588c.js"],"default"]
5:I[39863,["/_next/static/chunks/94ba2cde1157bdf7.js","/_next/static/chunks/cb5adbf303334e0f.js"],""]
b:I[21044,["/_next/static/chunks/7c4f85df3640cb60.js","/_next/static/chunks/67b669c080ef588c.js"],"default"]
:HL["/_next/static/chunks/055d524cca3e2418.css","style"]
:HL["/_next/static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/chunks/11a6a7cd862de9e1.css","style"]
0:{"P":null,"b":"xRREO7qbuAEKvxbaaa96y","c":["","articles","2024-02-01-Docker-in-WSL2"],"q":"","i":false,"f":[[["",{"children":["articles",{"children":[["slug","2024-02-01-Docker-in-WSL2","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],[["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/055d524cca3e2418.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","script","script-0",{"src":"/_next/static/chunks/94ba2cde1157bdf7.js","async":true,"nonce":"$undefined"}],["$","script","script-1",{"src":"/_next/static/chunks/cb5adbf303334e0f.js","async":true,"nonce":"$undefined"}]],["$","html",null,{"lang":"en","className":"h-full antialiased","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"180x180","href":"/icons/apple-touch-icon.png?v=2"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/icons/favicon-32x32.png?v=2"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/icons/favicon-16x16.png?v=2"}],["$","link",null,{"rel":"manifest","href":"/icons/site.webmanifest?v=2"}],["$","link",null,{"rel":"mask-icon","href":"/icons/safari-pinned-tab.svg?v=2","color":"#00ff00"}],["$","link",null,{"rel":"shortcut icon","href":"/icons/favicon.ico?v=2"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#535353"}],["$","meta",null,{"name":"msapplication-config","content":"/icons/browserconfig.xml?v=2"}],["$","meta",null,{"name":"theme-color","content":"#ffffff"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}]]}],["$","body",null,{"className":"flex h-full bg-zinc-900 md:bg-black","children":["$","div",null,{"className":"flex w-full","children":[["$","div",null,{"className":"hidden md:fixed md:inset-0 md:flex md:justify-center md:px-8 pointer-events-none z-0","aria-hidden":"true","children":["$","div",null,{"className":"flex w-full max-w-7xl lg:px-8","children":["$","div",null,{"className":"w-full ring-1 bg-zinc-900 ring-zinc-300/20"}]}]}],["$","div",null,{"className":"relative flex w-full flex-col text-zinc-400 z-10","children":[["$","$L2",null,{}],["$","main",null,{"className":"flex-auto","children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"ref":"$undefined","className":"sm:px-8 flex h-full items-center pt-16 sm:pt-32","children":["$","div",null,{"className":"mx-auto w-full max-w-7xl lg:px-8","children":["$","div",null,{"ref":"$undefined","className":"relative px-4 sm:px-8 lg:px-12","children":["$","div",null,{"className":"mx-auto max-w-2xl lg:max-w-5xl","children":["$","div",null,{"className":"flex flex-col items-center","children":[["$","p",null,{"className":"text-base font-semibold text-zinc-500","children":"404"}],["$","h1",null,{"className":"mt-4 text-4xl font-bold tracking-tight sm:text-5xl text-zinc-100","children":"Page not found"}],["$","p",null,{"className":"mt-4 text-base text-zinc-400","children":"Sorry, I couldn’t find the page you’re looking for."}],["$","$L5",null,{"className":"inline-flex items-center gap-2 justify-center rounded-md py-2 px-3 text-sm outline-offset-2 transition active:transition-none font-medium active:bg-zinc-100 active:text-zinc-900/60 bg-zinc-800/50 text-zinc-300 hover:bg-zinc-800 hover:text-zinc-50 active:bg-zinc-800/50 active:text-zinc-50/70 mt-4","href":"/","children":"Go back home"}]]}]}]}]}]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"mt-32 flex-none","children":["$","div",null,{"ref":"$undefined","className":"sm:px-8","children":["$","div",null,{"className":"mx-auto w-full max-w-7xl lg:px-8","children":["$","div",null,{"className":"border-t pt-10 pb-16 border-zinc-700/40","children":["$","div",null,{"ref":"$undefined","className":"relative px-4 sm:px-8 lg:px-12","children":["$","div",null,{"className":"mx-auto max-w-2xl lg:max-w-5xl","children":["$","div",null,{"className":"flex flex-col items-center justify-between gap-6 md:flex-row","children":[["$","div",null,{"className":"flex flex-wrap justify-center gap-x-6 gap-y-1 text-sm font-medium text-zinc-200","children":[["$","$L5",null,{"href":"/","className":"transition hover:text-teal-400","children":"About"}],["$","$L5",null,{"href":"/projects","className":"transition hover:text-teal-400","children":"Projects"}],["$","$L5",null,{"href":"/legal","className":"transition hover:text-teal-400","children":"Legal"}]]}],"$L6"]}]}]}]}]}]}]}]]}]]}]}]]}]]}],{"children":["$L7",{"children":["$L8",{"children":["$L9",{},null,false,false]},null,false,false]},null,false,false]},null,false,false],"$La",false]],"m":"$undefined","G":["$b",[]],"S":true}
d:I[61879,["/_next/static/chunks/7c4f85df3640cb60.js","/_next/static/chunks/67b669c080ef588c.js"],"OutletBoundary"]
e:"$Sreact.suspense"
10:I[61879,["/_next/static/chunks/7c4f85df3640cb60.js","/_next/static/chunks/67b669c080ef588c.js"],"ViewportBoundary"]
12:I[61879,["/_next/static/chunks/7c4f85df3640cb60.js","/_next/static/chunks/67b669c080ef588c.js"],"MetadataBoundary"]
6:["$","p",null,{"className":"text-sm text-zinc-500","children":"© 2011 InDieTasten. All rights reserved."}]
7:["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
8:["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
9:["$","$1","c",{"children":["$Lc",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/chunks/11a6a7cd862de9e1.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$Ld",null,{"children":["$","$e",null,{"name":"Next.MetadataOutlet","children":"$@f"}]}]]}]
a:["$","$1","h",{"children":[null,["$","$L10",null,{"children":"$L11"}],["$","div",null,{"hidden":true,"children":["$","$L12",null,{"children":["$","$e",null,{"name":"Next.Metadata","children":"$L13"}]}]}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}]
11:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
f:null
13:[["$","title","0",{"children":"Running docker engine inside WSL2 - InDieTasten"}],["$","meta","1",{"name":"description","content":"Homepage and blog by InDieTasten."}],["$","meta","2",{"property":"og:title","content":"Running docker engine inside WSL2 - InDieTasten"}],["$","meta","3",{"property":"og:description","content":"Homepage and blog by InDieTasten."}],["$","meta","4",{"name":"twitter:card","content":"summary"}],["$","meta","5",{"name":"twitter:title","content":"Running docker engine inside WSL2 - InDieTasten"}],["$","meta","6",{"name":"twitter:description","content":"Homepage and blog by InDieTasten."}]]
:HL["/avatar.png","image"]
14:T11d0,<h2>Prerequisites</h2>
<ul>
<li>Windows 11 23H2 OS Build 22631.3007 <a href="#checking-windows-version">How to check</a></li>
<li>UEFI / BIOS with virtualization enabled <a href="#checking-virtualization">How to check</a></li>
</ul>
<h2>Steps:</h2>
<h3>Installing MS Store version of WSL2</h3>
<p>Even if you've installed WSL2 before using one of the distributions listed in the Microsoft Store, there is a separate Store Product by Microsoft called <a href="https://www.microsoft.com/store/productId/9P9TQF7MRM4R?ocid=pdpshare">Windows Subsystem for Linux</a> that supports a crucial feature, called initd.</p>
<p>Go ahead and install that package. If you have existing distributions, they will be kept. The installation of this store product will only update WSL2 itself, and won't mess with your distributions.</p>
<p>You can also install the package using WinGet within PowerShell:</p>
<pre><code class="language-powershell">winget install 9P9TQF7MRM4R <span class="pl-k">--</span>source msstore
</code></pre>
<p>You can check your install by running <code>wsl --version</code> in PowerShell or Cmd. The expected output should be similar to this:</p>
<pre><code>WSL version: 2.0.14.0
Kernel version: 5.15.133.1-1
WSLg version: 1.0.59
MSRDC version: 1.2.4677
Direct3D version: 1.611.1-81528511
DXCore version: 10.0.25131.1002-220531-1700.rs-onecore-base2-hyp
Windows version: 10.0.22631.3007
</code></pre>
<h3>Installing Ubuntu distro</h3>
<p>Similar steps might work in other distros as well, but I have verified these steps only for the Ubuntu distro, so that's what this tutorial will be focused on.</p>
<p>In powershell, run the following to install a new Ubuntu instance:</p>
<pre><code class="language-powershell">wsl <span class="pl-k">--</span>install <span class="pl-k">-</span>d Ubuntu<span class="pl-k">-</span><span class="pl-c1">22.04</span>
</code></pre>
<p>This command should land you in the account creation. Create your local account for the distro. After that you should be greeted with the MOTD and a bash. Go ahead and update all packages:</p>
<pre><code class="language-bash">sudo apt-get update <span class="pl-k">&#x26;&#x26;</span> sudo apt-get upgrade -y
</code></pre>
<h3>Verify systemd</h3>
<p>While still in bash inside the WSL2 Ubuntu instance, run:</p>
<pre><code class="language-bash">cat /etc/wsl.conf
</code></pre>
<p>This should output</p>
<pre><code class="language-toml">[<span class="pl-en">boot</span>]
<span class="pl-smi">systemd</span>=<span class="pl-c1">true</span>
</code></pre>
<p>If the file does not exist or contains something else, refer to <a href="#configuring-systemd-inside-wsl">these steps</a>.</p>
<h3>Install docker</h3>
<p>Inside the Ubuntu bash, execute:</p>
<pre><code class="language-bash">sudo bash -c <span class="pl-s"><span class="pl-pds">'</span>apt-get install -y apt-transport-https ca-certificates curl software-properties-common &#x26;&#x26; \</span>
<span class="pl-s">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add - &#x26;&#x26; \</span>
<span class="pl-s">add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" &#x26;&#x26; \</span>
<span class="pl-s">apt-get update -y &#x26;&#x26; apt-get install -y docker-ce &#x26;&#x26; usermod -aG docker $USER &#x26;&#x26; newgrp docker &#x26;&#x26; exit<span class="pl-pds">'</span></span>
</code></pre>
<h3>Use docker</h3>
<pre><code class="language-bash">sudo docker run hello-world
</code></pre>
<p>Done! You can now use Docker inside your WSL2 Ubuntu 22.04!</p>
<h2>Details &#x26; Troubleshooting</h2>
<h3>Checking Windows Version</h3>
<ol>
<li>Open the "Run" prompt of Windows by pressing <code>Win</code> + <code>R</code></li>
<li>Type in "winver" into the prompt and submit the command</li>
<li>A window should open</li>
</ol>
<h3>Checking virtualization</h3>
<ol>
<li>Open Task Manager</li>
<li>Navigate to the performance "tab"</li>
<li>Navigate to the CPU details</li>
<li>The details should display "Virtualization: Enabled"</li>
</ol>
<h3>Configuring systemd inside WSL</h3>
<p>Replace <code>/etc/wsl.conf</code> inside the distro with the following:</p>
<pre><code class="language-toml">[<span class="pl-en">boot</span>]
<span class="pl-smi">systemd</span>=<span class="pl-c1">true</span>
</code></pre>
<p>In Windows, use PowerShell to power-cycle the distro:</p>
<pre><code class="language-powershell">wsl <span class="pl-k">--</span>shutdown
wsl <span class="pl-k">-</span>d Ubuntu<span class="pl-k">-</span><span class="pl-c1">22.04</span>
</code></pre>c:["$","main",null,{"children":["$","div",null,{"ref":"$undefined","className":"sm:px-8","children":["$","div",null,{"className":"mx-auto w-full max-w-7xl lg:px-8","children":["$","div",null,{"ref":"$undefined","className":"relative px-4 sm:px-8 lg:px-12","children":["$","div",null,{"className":"mx-auto max-w-2xl lg:max-w-5xl","children":["$","article",null,{"className":"mb-32","children":[[["$","h1",null,{"className":"text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left","children":"Running docker engine inside WSL2"}],["$","div",null,{"className":"mb-4 flex flex-wrap gap-2","children":[["$","span","docker",{"className":"bg-gray-300 text-gray-700 px-2 py-1 rounded text-xs font-medium","children":["#","docker"]}],["$","span","wsl2",{"className":"bg-gray-300 text-gray-700 px-2 py-1 rounded text-xs font-medium","children":["#","wsl2"]}],["$","span","linux",{"className":"bg-gray-300 text-gray-700 px-2 py-1 rounded text-xs font-medium","children":["#","linux"]}]]}],["$","div",null,{"className":"hidden md:block md:mb-12","children":["$","div",null,{"className":"flex items-center","children":[["$","img",null,{"src":"/avatar.png","className":"w-12 h-12 rounded-full mr-4","alt":"InDieTasten"}],["$","div",null,{"className":"text-xl font-bold","children":"InDieTasten"}]]}]}],["$","div",null,{"className":"max-w-2xl mx-auto","children":[["$","div",null,{"className":"block md:hidden mb-6","children":["$","div",null,{"className":"flex items-center","children":[["$","img",null,{"src":"/avatar.png","className":"w-12 h-12 rounded-full mr-4","alt":"InDieTasten"}],["$","div",null,{"className":"text-xl font-bold","children":"InDieTasten"}]]}]}],["$","div",null,{"className":"mb-6 text-lg","children":["$","time",null,{"dateTime":"2024-02-01T00:00:00.000Z","children":"February\t1, 2024"}]}]]}]],["$","div",null,{"className":"max-w-2xl mx-auto","children":["$","div",null,{"className":"$undefined","dangerouslySetInnerHTML":{"__html":"$14"}}]}]]}]}]}]}]}]}]
